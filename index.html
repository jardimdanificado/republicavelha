<!DOCTYPE html>
<html>

<head>
	<style>
		html, body 
		{
			border: 0px; 
			margin: 0px;
			padding: 0px;
			height: 100%;
			width: 100%;
			font-family:'Lucida Console', monospace;
			font-size: 80%;
			white-space: nowrap;
		}
		canvas 
		{
			display: block;
			position: absolute;
			left: 0;
			top: 0;
		}
	</style>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>republicavelha</title>
</head>

<body>
	<p id="console-screen">republicavelha</p>
	<script src="src/republicavelha.js" type="module"></script>
	<script>
		var mapa, Republica, htmltxt;//declared outside debug function so we can console.log it globally
		async function debug()
		{
			Republica = await import("./src/republicavelha.js");
			console.log(Republica)
			console.log(Republica.Objecto.Creature('human','male'));
			
			mapa = Republica.Terrain.AutoTerrain(8,'flat',4,15,1024,0,-1);
			var htmltxt = '';
			
			for(let x = 0;x<mapa.length;x++)
			{
				for(let y = 0;y<mapa.length;y++)
				{
					let ok = false;
					for(let z = 0;z<mapa.length-1;z++)
					{
						if(mapa[x][y][z][0].subtype === 'half')
						{
							htmltxt += '>> ';
							ok=true;
							break;
						}
						else if(mapa[x][y][z][0].subtype === "full"&&mapa[x][y][z+1][0].subtype === "empty")
						{
							if(z<10)
							{	
								htmltxt += ('0'+z + ' ');
								ok = true;
							}	
							else
							{
								htmltxt += (z+' ');
								ok = true;
							}
							break;
						}
					}
					if(!ok)
					{
						htmltxt += "JJ ";
					}
				}
				if(typeof window !== 'undefined')
					htmltxt += '<br>';
				else if(typeof process !== 'undefined')
					htmltxt += '\n';
			}
			
			if(typeof window !== 'undefined')
				document.getElementById("console-screen").innerHTML = htmltxt;
			else if(typeof process !== 'undefined')//
			{
				console.clear();
				process.stdout.write(htmltxt);
			}
		};
		debug();
	</script>
</body>

</html>